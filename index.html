<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Move Estimator</title>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #d9f0ff;
      color: #222;
      margin: 0;
      padding: 20px;
    }
    h1 { text-align: center; }
    .item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px;
      margin: 4px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #fff;
    }
    .fragile { background: #ffe8e8; border-color: #ff6b6b; }
    .item label { flex: 1; }
    #total { font-weight: bold; font-size: 1.2em; margin-top: 20px; }
    button {
      padding: 6px 12px;
      margin-left: 10px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    .fragile-btn { background: #ffb6b6; }
    #submitBtn { background: #4caf50; color: white; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>üì¶ Move Volume Estimator</h1>
  <div id="items"></div>
  <div id="total">Total Volume: 0 m¬≥</div>
  <button id="submitBtn">Submit Estimate</button>

  <script>
    // INIT EmailJS
    (function(){
      emailjs.init("YOUR_PUBLIC_KEY"); // <<< tu wklej sw√≥j public key
    })();

    const items = [
      { name: "Small Box (457x333x333mm)", volume: 0.05 },
      { name: "Large Box (457x450x479mm)", volume: 0.10 },
      { name: "Wardrobe Box (508x451x1016mm)", volume: 0.23 },
      { name: "Sofa 3-Seater", volume: 2.5 },
      { name: "King Size Bed", volume: 1.8 },
      { name: "Office Chair", volume: 0.5 }
    ];

    const container = document.getElementById("items");
    const totalDiv = document.getElementById("total");
    let total = 0;

    items.forEach((item) => {
      const div = document.createElement("div");
      div.classList.add("item");

      const label = document.createElement("label");
      label.textContent = `${item.name} (${item.volume} m¬≥)`;

      const input = document.createElement("input");
      input.type = "number";
      input.min = 0;
      input.value = 0;
      input.style.width = "50px";

      const fragileBtn = document.createElement("button");
      fragileBtn.textContent = "Fragile";
      fragileBtn.classList.add("fragile-btn");
      fragileBtn.onclick = () => {
        div.classList.toggle("fragile");
      };

      input.addEventListener("input", () => {
        calculateTotal();
      });

      div.appendChild(label);
      div.appendChild(input);
      div.appendChild(fragileBtn);
      container.appendChild(div);
    });

    function calculateTotal() {
      total = 0;
      const inputs = document.querySelectorAll(".item input");
      inputs.forEach((input, index) => {
        total += parseFloat(input.value) * items[index].volume;
      });
      totalDiv.textContent = `Total Volume: ${total.toFixed(2)} m¬≥`;
    }

    // Submit via EmailJS
    document.getElementById("submitBtn").addEventListener("click", () => {
      let message = "Move Estimate:\n\n";
      const inputs = document.querySelectorAll(".item input");
      inputs.forEach((input, index) => {
        const qty = parseInt(input.value);
        if (qty > 0) {
          const fragile = container.children[index].classList.contains("fragile") ? " (FRAGILE)" : "";
          message += `${items[index].name}: ${qty} pcs${fragile}\n`;
        }
      });
      message += `\nTotal Volume: ${total.toFixed(2)} m¬≥`;

      emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
        message: message
      })
      .then(() => {
        alert("‚úÖ Estimate sent successfully!");
      }, (error) => {
        alert("‚ùå Error: " + JSON.stringify(error));
      });
    });
  </script>
</body>
</html>
